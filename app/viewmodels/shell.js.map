{"version":3,"file":"shell.js","sourceRoot":"","sources":["shell.ts"],"names":[],"mappings":";;IA+BA;QAyKC;YAAA,iBAGC;YA3KD,aAAQ,GAA2C,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YAC1E,gBAAW,GAA+B,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC3D,eAAU,GAA+B,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC1D,iBAAY,GAAsC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACtE,cAAS,GAAoC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YACpE,gBAAW,GAAoC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YAEtE,eAAU,GAAG;gBACZ,IAAM,OAAO,GAAG;oBACf,OAAO,EAAE,EAAE;oBACX,QAAQ,EAAE,EAAE;oBACZ,OAAO,EAAE,EAAE;oBACX,KAAK,EAAE,EAAE;oBACT,QAAQ,EAAE,EAAE;oBACZ,QAAQ,EAAE,EAAE;oBACZ,EAAE,EAAE,EAAE;oBACN,KAAK,EAAE,EAAE;oBACT,UAAU,EAAE,EAAE;oBACd,SAAS,EAAE,EAAE;iBACb,CAAC;gBACF,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACrB,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAA;YAC3B,CAAC,CAAC;YAEF,uBAAkB,GAAG;gBACpB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC;oBACnC,MAAM,CAAC,IAAI,CAAA;gBACZ,CAAC;gBACD,IAAM,GAAG,GAAG,gBAAc,KAAI,CAAC,YAAY,EAAE,CAAC,EAAI,CAAC;gBACnD,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE;oBAChB,IAAI,EAAE,QAAQ;iBACd,CAAC,CAAC,IAAI,CAAC;oBACP,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;gBACrB,CAAC,CAAC,CAAA;YACH,CAAC,CAAC;YAEF,0BAAqB,GAAG;gBACvB,MAAM,CAAC,CAAC,KAAI,CAAC,YAAY,EAAE,IAAI,KAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAA;YACvD,CAAC,CAAC;YAEF,oBAAe,GAAG,UAAC,QAAuB;gBACzC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;oBAClB,MAAM,CAAC,IAAI,CAAA;gBACZ,CAAC;gBACD,IAAM,GAAG,GAAG,gBAAc,QAAQ,CAAC,EAAI,CAAC;gBACxC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,QAAuB;oBAChD,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBACtB,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC7B,CAAC,CAAC,CAAA;YACH,CAAC,CAAC;YAEF,sBAAiB,GAAG,UAAC,QAAuB;gBAC3C,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;oBACvC,MAAM,CAAC,IAAI,CAAA;gBACZ,CAAC;gBACD,MAAM,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,KAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAA;YAChD,CAAC,CAAC;YAEF,eAAU,GAAG,UAAC,OAAsB,EAAE,KAAU;gBAC/C,KAAK,CAAC,eAAe,EAAE,CAAC;gBACxB,IAAM,GAAG,GAAG,gBAAc,OAAO,CAAC,EAAI,CAAC;gBACvC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE;oBAChB,IAAI,EAAE,QAAQ;iBACd,CAAC,CAAC,IAAI,CAAC;oBACP,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;gBACrB,CAAC,CAAC,CAAA;YACH,CAAC,CAAC;YAEF,aAAQ,GAAG,UAAC,UAAkB;gBAC7B,KAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAA;YAC9B,CAAC,CAAC;YAEF,iBAAY,GAAG;gBACd,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC5B,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAA;gBAC1C,CAAC;YACF,CAAC,CAAC;YAEF,iBAAY,GAAG;gBACd,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,EAAE,GAAG,KAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;oBAC5C,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,CAAA;gBAC1C,CAAC;YACF,CAAC,CAAC;YAMF,eAAU,GAAG,UAAC,OAAO;gBACpB,MAAM,CAAE,UAAC,CAAC;oBACR,IAAI,OAAO,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC;oBAC7B,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC;oBAErC;;;;;;;;;;;;;;;;;uBAiBG;gBACJ,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC;YAEF,mBAAc,GAAG;gBAChB,IAAM,GAAG,GAAG,YAAY,CAAC;gBACzB,IAAM,IAAI,GAAG,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,EAAE,CAAC,EAAE;sBACrD,KAAK,GAAG,MAAM,CAAC;gBAClB,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE;oBAChB,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,YAAY,EAAE,CAAC;oBACzC,IAAI,MAAA;oBACJ,WAAW,EAAE,kBAAkB;iBAC/B,CAAC,CAAC,IAAI,CAAC;oBACP,KAAI,CAAC,WAAW,EAAE,CAAA;gBACnB,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,GAAQ,IAAK,OAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAA;YACxC,CAAC,CAAC;YAEF,aAAQ,GAAG;gBACV,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,EAAE,IAAI,KAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACnD,KAAI,CAAC,eAAe,CAAC,KAAI,CAAC,YAAY,EAAE,CAAC,CAAA;gBAC1C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACP,KAAI,CAAC,UAAU,EAAE,CAAA;gBAClB,CAAC;YACF,CAAC,CAAC;YAoCD,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,iEAAiE;QAClE,CAAC;QAvFD,gDAAuB,GAAvB,UAAwB,UAAU;YACjC,MAAM,CAAC,CAAC,UAAU,KAAK,IAAI,CAAC,WAAW,EAAE,CAAC,CAAA;QAC3C,CAAC;QAiDD,sCAAa,GAAb;YAAA,iBAKC;YAJA,IAAM,GAAG,GAAG,gBAAgB,CAAC;YAC7B,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,QAAkB;gBAC3C,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAA;QACH,CAAC;QAED,uCAAc,GAAd,UAAe,YAA6B;YAC3C,IAAM,QAAQ,GAAG,EAAE,CAAC;YACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/C,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;YACrB,CAAC;YACD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAA;QAC3B,CAAC;QAED,qCAAY,GAAZ,UAAa,UAAsB;YAAnC,iBAWC;YAXY,2BAAA,EAAA,cAAsB;YAClC,IAAM,GAAG,GAAG,gBAAc,UAAU,gBAAa,CAAC;YAClD,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,QAA0B;gBACnD,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAC7B,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAChC,KAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBACrC,KAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9B,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;gBACvC,CAAC;YACF,CAAC,CAAC,CAAA;QACH,CAAC;QAED,oCAAW,GAAX;YACC,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC;QAMF,qBAAC;IAAD,CAAC,AA7KD,IA6KC;IAED,OAAS,cAAc,CAAC","sourcesContent":["import ko = require(\"knockout\");\nimport  jquery = require(\"jquery\");\n\ninterface previewsResponse {\n\tdata: IPreviewsData[],\n\tlimit: number,\n\tpage: number,\n\ttotalItems: number,\n\ttotalPages: number,\n}\n\ninterface IPreviewsData {\n\tcountry: string,\n\tfullName: string,\n\tid: string,\n\tphoto: string,\n}\n\ninterface IUserFullData {\n\taddress: string,\n\tbirthday: string,\n\tcountry: string,\n\temail: string,\n\tfullInfo: string,\n\tfullName: string,\n\tid: string,\n\tphoto: string,\n\tprofession: string,\n\tshortInfo: string,\n}\n\nclass ShellViewModel {\n\tpreviews: KnockoutObservableArray<IPreviewsData> = ko.observableArray([]);\n\tcurrentPage: KnockoutObservable<number> = ko.observable(1);\n\ttotalPages: KnockoutObservable<number> = ko.observable(0);\n\tselectedUser: KnockoutObservable<IUserFullData> = ko.observable(null);\n\tcountries: KnockoutObservableArray<string> = ko.observableArray([]);\n\tpageNumbers: KnockoutObservableArray<number> = ko.observableArray([]);\n\n\taddNewUser = () => {\n\t\tconst newUser = {\n\t\t\taddress: \"\",\n\t\t\tbirthday: \"\",\n\t\t\tcountry: \"\",\n\t\t\temail: \"\",\n\t\t\tfullInfo: \"\",\n\t\t\tfullName: \"\",\n\t\t\tid: \"\",\n\t\t\tphoto: \"\",\n\t\t\tprofession: \"\",\n\t\t\tshortInfo: \"\",\n\t\t};\n\t\tconsole.dir(newUser);\n\t\tthis.selectedUser(newUser)\n\t};\n\n\tremoveSelectedUser = () => {\n\t\tif (!this.canRemoveSelectedUser()) {\n\t\t\treturn null\n\t\t}\n\t\tconst url = `/api/users/${this.selectedUser().id}`;\n\t\tjquery.ajax(url, {\n\t\t\ttype: \"delete\",\n\t\t}).done(() => {\n\t\t\tthis.loadPreviews(1)\n\t\t})\n\t};\n\n\tcanRemoveSelectedUser = () => {\n\t\treturn (this.selectedUser() && this.selectedUser().id)\n\t};\n\n\tgetSelectedUser = (userData: IPreviewsData) => {\n\t\tif (!userData.id) {\n\t\t\treturn null\n\t\t}\n\t\tconst url = `/api/users/${userData.id}`;\n\t\tjquery.getJSON(url).done((response: IUserFullData) => {\n\t\t\tconsole.dir(response);\n\t\t\tthis.selectedUser(response);\n\t\t})\n\t};\n\n\tgetActiveUserFlag = (dataUser: IPreviewsData) => {\n\t\tif (!dataUser || !this.selectedUser()) {\n\t\t\treturn null\n\t\t}\n\t\treturn (dataUser.id === this.selectedUser().id)\n\t};\n\n\tdataDelete = (userDat: IPreviewsData, event: any) => {\n\t\tevent.stopPropagation();\n\t\tconst url = `/api/users/${userDat.id}`;\n\t\tjquery.ajax(url, {\n\t\t\ttype: \"delete\",\n\t\t}).done(() => {\n\t\t\tthis.loadPreviews(1)\n\t\t})\n\t};\n\n\tgoToPage = (numberPage: number) => {\n\t\tthis.loadPreviews(numberPage)\n\t};\n\n\tgoToPrevPage = () => {\n\t\tif (this.currentPage() > 1) {\n\t\t\tthis.loadPreviews(this.currentPage() - 1)\n\t\t}\n\t};\n\n\tgoToNextPage = () => {\n\t\tif (this.currentPage() < this.totalPages()) {\n\t\t\tthis.loadPreviews(this.currentPage() + 1)\n\t\t}\n\t};\n\n\tgetActivePageNumberFlag(pageNumber) {\n\t\treturn (pageNumber === this.currentPage())\n\t}\n\n\tmainScript = (context) => {\n\t\tjquery( (f) => {\n\t\t\t\tlet element = f('#fixedTop');\n\t\t\t\tconsole.dir(f(context).scrollTop());\n\n\t\t\t/*\n\t\t\t\tconst scrollHeight = 190;\n\t\t\tif (f().scrollTop() < scrollHeight) {\n\t\t\t\telement.css({\n\t\t\t\t\tposition:\"relative\"\n\t\t\t\t})\n\t\t\t} else if(f().scrollTop() === scrollHeight) {\n\t\t\t\telement.css({\n\t\t\t\t\tposition:\"relative\",\n\t\t\t\t\ttop:0\n\t\t\t\t})\n\t\t\t}\n\t\t\telse if (f().scrollTop() > scrollHeight) {\n\t\t\t\telement.css({\n\t\t\t\t\tposition:\"relative\",\n\t\t\t\t\ttop: () => f().scrollTop()\n\t\t\t\t})\n\t\t\t}*/\n\t\t});\n\t};\n\n\thandleSaveUser = () => {\n\t\tconst url = \"/api/users\";\n\t\tconst type = this.selectedUser && this.selectedUser().id\n\t\t\t? \"put\" : \"post\";\n\t\tjquery.ajax(url, {\n\t\t\tdata: JSON.stringify(this.selectedUser()),\n\t\t\ttype,\n\t\t\tcontentType: \"application/json\"\n\t\t}).done(() => {\n\t\t\tthis.initialLoad()\n\t\t}).fail((err: any) => console.dir(err))\n\t};\n\n\tonCancel = () => {\n\t\tif (this.selectedUser() && this.selectedUser().id) {\n\t\t\tthis.getSelectedUser(this.selectedUser())\n\t\t} else {\n\t\t\tthis.addNewUser()\n\t\t}\n\t};\n\n\tloadCountries() {\n\t\tconst url = `/api/countries`;\n\t\tjquery.getJSON(url).done((response: string[]) => {\n\t\t\tthis.countries(response);\n\t\t})\n\t}\n\n\tgetPageNumbers(totalelement: string | number) {\n\t\tconst dataList = [];\n\t\tfor (let i = 0; i < Number(totalelement); i++) {\n\t\t\tdataList.push(i + 1)\n\t\t}\n\t\tthis.pageNumbers(dataList)\n\t}\n\n\tloadPreviews(pageNumber: number = 1) {\n\t\tconst url = `/api/users/${pageNumber}/10/preview`;\n\t\tjquery.getJSON(url).done((response: previewsResponse) => {\n\t\t\tthis.previews(response.data);\n\t\t\tthis.currentPage(response.page);\n\t\t\tthis.totalPages(response.totalPages);\n\t\t\tthis.getPageNumbers(response.totalPages);\n\t\t\tif (response.data.length > 0) {\n\t\t\t\tthis.getSelectedUser(response.data[0])\n\t\t\t}\n\t\t})\n\t}\n\n\tinitialLoad() {\n\t\tthis.loadCountries();\n\t\tthis.loadPreviews(1);\n\t}\n\n\tconstructor() {\n\t\tthis.initialLoad();\n\t\t// this.selectedUser.subscribe(newValue => console.dir(newValue))\n\t}\n}\n\nexport = ShellViewModel;"]}