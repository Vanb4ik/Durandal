{"version":3,"file":"shell.js","sourceRoot":"","sources":["shell.ts"],"names":[],"mappings":"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","sourcesContent":["import ko = require(\"knockout\");\nimport  jquery = require(\"jquery\");\nimport router = require(\"plugins/router\");\nimport Pagination = require(\"./pagination\");\n\ninterface previewsResponse {\n\tdata: IPreviewsData[],\n\tlimit: number,\n\tpage: number,\n\ttotalItems: number,\n\ttotalPages: number,\n}\n\ninterface IPreviewsData {\n\tcountry: string,\n\tfullName: string,\n\tid: string,\n\tphoto: string,\n}\n\n\nclass ShellViewModel {\n\trouter = router;\n\tpreviews: KnockoutObservableArray<IPreviewsData> = ko.observableArray([]);\n\tcurrentPage: KnockoutObservable<number> = ko.observable(1);\n\ttotalPages: KnockoutObservable<number> = ko.observable(0);\n\tselectedUser: KnockoutObservable<IUserFullData> = ko.observable(null);\n\tcountries: KnockoutObservableArray<string> = ko.observableArray([]);\n\tpageNumbers: KnockoutObservableArray<number> = ko.observableArray([]);\n\t// pagination =ko.observable( new Pagination(this.currentPage(), this.totalPages(), this.pageNumbers(), this.selectedUser())) ;\n\n\taddNewUser = () => {\n\t\tconst newUser = {\n\t\t\taddress: \"\",\n\t\t\tbirthday: \"\",\n\t\t\tcountry: \"\",\n\t\t\temail: \"\",\n\t\t\tfullInfo: \"\",\n\t\t\tfullName: \"\",\n\t\t\tid: \"\",\n\t\t\tphoto: \"\",\n\t\t\tprofession: \"\",\n\t\t\tshortInfo: \"\",\n\t\t};\n\t\tconsole.dir(newUser);\n\t\tthis.selectedUser(newUser)\n\t};\n\n\tremoveSelectedUser = () => {\n\t\tif (!this.canRemoveSelectedUser()) {\n\t\t\treturn null\n\t\t}\n\t\tconst url = `/api/users/${this.selectedUser().id}`;\n\t\tjquery.ajax(url, {\n\t\t\ttype: \"delete\",\n\t\t}).done(() => {\n\t\t\tthis.loadPreviews(1)\n\t\t})\n\t};\n\n\tcanRemoveSelectedUser = () => {\n\t\treturn (this.selectedUser() && this.selectedUser().id)\n\t};\n\n\tgetSelectedUser = (userData: IPreviewsData) => {\n\t\tif (!userData.id) {\n\t\t\treturn null\n\t\t}\n\t\tconst url = `/api/users/${userData.id}`;\n\t\tjquery.getJSON(url).done((response: IUserFullData) => {\n\t\t\tconsole.dir(response);\n\t\t\t// console.dir(this.pagination().getSelectedUser());\n\t\t\tthis.selectedUser(response);\n\t\t})\n\t};\n\n\tgetActiveUserFlag = (dataUser: IPreviewsData) => {\n\t\tif (!dataUser || !this.selectedUser()) {\n\t\t\treturn null\n\t\t}\n\t\treturn (dataUser.id === this.selectedUser().id)\n\t};\n\n\tdataDelete = (userDat: IPreviewsData, event: any) => {\n\t\tevent.stopPropagation();\n\t\tconst url = `/api/users/${userDat.id}`;\n\t\tjquery.ajax(url, {\n\t\t\ttype: \"delete\",\n\t\t}).done(() => {\n\t\t\tthis.loadPreviews(1)\n\t\t})\n\t};\n\n\tmainScript = (context) => {\n\t\tjquery( (f) => {\n\t\t\t\tlet element = f('#fixedTop');\n\t\t\t\t// console.dir(f(context).scrollTop());\n\t\t\t/*\n\t\t\t\tconst scrollHeight = 190;\n\t\t\tif (f().scrollTop() < scrollHeight) {\n\t\t\t\telement.css({\n\t\t\t\t\tposition:\"relative\"\n\t\t\t\t})\n\t\t\t} else if(f().scrollTop() === scrollHeight) {\n\t\t\t\telement.css({\n\t\t\t\t\tposition:\"relative\",\n\t\t\t\t\ttop:0\n\t\t\t\t})\n\t\t\t}\n\t\t\telse if (f().scrollTop() > scrollHeight) {\n\t\t\t\telement.css({\n\t\t\t\t\tposition:\"relative\",\n\t\t\t\t\ttop: () => f().scrollTop()\n\t\t\t\t})\n\t\t\t}*/\n\t\t});\n\t};\n\n\thandleSaveUser = () => {\n\t\tconst url = \"/api/users\";\n\t\tconst type = this.selectedUser && this.selectedUser().id\n\t\t\t? \"put\" : \"post\";\n\t\tjquery.ajax(url, {\n\t\t\tdata: JSON.stringify(this.selectedUser()),\n\t\t\ttype,\n\t\t\tcontentType: \"application/json\"\n\t\t}).done(() => {\n\t\t\tthis.initialLoad()\n\t\t}).fail((err: any) => console.dir(err))\n\t};\n\n\tonCancel = () => {\n\t\tif (this.selectedUser() && this.selectedUser().id) {\n\t\t\tthis.getSelectedUser(this.selectedUser())\n\t\t} else {\n\t\t\tthis.addNewUser()\n\t\t}\n\t};\n\n\tloadCountries = () => {\n\t\tconst url = `/api/countries`;\n\t\tjquery.getJSON(url).done((response: string[]) => {\n\t\t\tthis.countries(response);\n\t\t})\n\t};\n\n\tgetPageNumbers = (totalelement: string | number) => {\n\t\tconst dataList = [];\n\t\tfor (let i = 0; i < Number(totalelement); i++) {\n\t\t\tdataList.push(i + 1)\n\t\t}\n\t\tthis.pageNumbers(dataList)\n\t};\n\n\tloadPreviews = (pageNumber: number = 1) => {\n\t\tconst url = `/api/users/${pageNumber}/10/preview`;\n\t\tjquery.getJSON(url).done((response: previewsResponse) => {\n\t\t\tthis.previews(response.data);\n\t\t\tthis.currentPage(response.page);\n\t\t\tthis.totalPages(response.totalPages);\n\t\t\tthis.getPageNumbers(response.totalPages);\n\t\t\tif (response.data.length > 0) {\n\t\t\t\tthis.getSelectedUser(response.data[0])\n\t\t\t}\n\t\t})\n\t};\n\n\tinitialLoad = () => {\n\t\tthis.loadCountries();\n\t\tthis.loadPreviews(1);\n\t};\n\n\tinitialRout = () => {\n\t\trouter.map([\n\t\t\t{route:\"\", title:\"Welcome\", moduleId: 'viewmodels/pagination', nav: true }\n\t\t]).buildNavigationModel();\n\t\trouter.activate()\n\t};\n\n\tactivate = () => {\n\t\tthis.initialLoad();\n\t\tthis.initialRout();\n\t}\n}\n\nexport = ShellViewModel;"]}